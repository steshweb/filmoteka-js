{"mappings":"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","sources":["src/library.js"],"sourcesContent":["import { fetchGenre, fetchFilmById, fetchFilmsCol } from './js/fetchApi';\nimport { creatMarkup, creatCardMarkup } from './js/markup';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst GENERS_LOCAL = 'genres';\nconst WATCHED_LOCAL = 'watched';\nconst QUEUE_LOCAL = 'queque';\n\nconst btnWatchedColRef = document.querySelector('.js-watched-btn');\nconst btnQueueColRef = document.querySelector('.js-queue-btn');\nconst btnRemoveWatchedRef = document.querySelector('button[data-watched]');\nconst btnRemoveQueueRef = document.querySelector('button[data-queue]');\nconst modalBtnsRef = document.querySelectorAll('.modal-btn');\nconst filmListRef = document.querySelector('.film-list');\nconst backdropRef = document.querySelector('.backdrop');\nconst closeModalBtn = document.querySelector('.modal-close__btn');\nconst modalBoxRef = document.querySelector('.modal-box');\n\nbtnQueueColRef.addEventListener('click', creatQueCol);\nbtnWatchedColRef.addEventListener('click', creatWatchCol);\nfilmListRef.addEventListener('click', openModal);\ncloseModalBtn.addEventListener('click', closeModal);\nbtnRemoveWatchedRef.addEventListener('click', removeFilmWatched);\nbtnRemoveQueueRef.addEventListener('click', removeFilmQueue);\n\nbackdropRef.addEventListener('click', evt => {\n  if (evt.target.className === 'backdrop') {\n    backdropRef.classList.add('is-hidden');\n  }\n});\n\ncreatWatchCol();\n\nfunction creatQueCol() {\n  btnQueueColRef.classList.add('header-lib-btn_active');\n  btnWatchedColRef.classList.remove('header-lib-btn_active');\n\n  const filmsQueue = JSON.parse(localStorage.getItem(QUEUE_LOCAL));\n  if (filmsQueue) {\n    fetchFilmsCol(filmsQueue)\n      .then(data => {\n        const markup = creatMarkup(data);\n        filmListRef.innerHTML = markup;\n      })\n      .catch(console.log);\n  }\n}\n\nfunction creatWatchCol() {\n  btnQueueColRef.classList.remove('header-lib-btn_active');\n  btnWatchedColRef.classList.add('header-lib-btn_active');\n  const filmsWatched = JSON.parse(localStorage.getItem(WATCHED_LOCAL));\n  if (filmsWatched) {\n    fetchFilmsCol(filmsWatched)\n      .then(data => {\n        const markup = creatMarkup(data);\n        filmListRef.innerHTML = markup;\n      })\n      .catch(console.log);\n  }\n}\nfunction openModal(evt) {\n  window.addEventListener('keydown', closeModalEsc);\n\n  const filmId = Number(evt.target.dataset.id);\n\n  if (!filmId) {\n    return;\n  }\n  backdropRef.classList.remove('is-hidden');\n\n  modalBtnsRef.forEach(item => {\n    item.setAttribute('data-id', filmId);\n  });\n\n  fetchFilmById(filmId)\n    .then(data => {\n      const markup = creatCardMarkup(data);\n      modalBoxRef.innerHTML = markup;\n    })\n    .catch(console.log);\n}\n\nfunction closeModalEsc(evt) {\n  if (evt.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  backdropRef.classList.add('is-hidden');\n  modalBtnsRef.forEach(item => {\n    item.removeAttribute('data-id');\n  });\n  window.removeEventListener('keydown', closeModalEsc);\n}\n\nfunction removeFilmWatched(evt) {\n  const id = Number(evt.target.dataset.id);\n  const arrW = JSON.parse(localStorage.getItem(WATCHED_LOCAL));\n\n  if (arrW) {\n    if (arrW.includes(id)) {\n      const idxOf = arrW.indexOf(id);\n      arrW.splice(idxOf, 1);\n      localStorage.setItem(WATCHED_LOCAL, JSON.stringify(arrW));\n      creatWatchCol();\n      Notify.success('Movie removed from Watched');\n      closeModal();\n      return;\n    }\n  }\n  Notify.warning('The movie is not in the Watched');\n}\n\nfunction removeFilmQueue(evt) {\n  const id = Number(evt.target.dataset.id);\n  const arrQ = JSON.parse(localStorage.getItem(QUEUE_LOCAL));\n\n  if (arrQ) {\n    if (arrQ.includes(id)) {\n      const idxOf = arrQ.indexOf(id);\n      arrQ.splice(idxOf, 1);\n      localStorage.setItem(QUEUE_LOCAL, JSON.stringify(arrQ));\n      Notify.success('Movie removed from Queue');\n      creatQueCol();\n      closeModal();\n      return;\n    }\n  }\n  Notify.warning('The movie is not in the Queue');\n}\n"],"names":["$9TCtp","parcelRequire","$ce3726a01b8ab25a$var$btnWatchedColRef","document","querySelector","$ce3726a01b8ab25a$var$btnQueueColRef","$ce3726a01b8ab25a$var$btnRemoveWatchedRef","$ce3726a01b8ab25a$var$btnRemoveQueueRef","$ce3726a01b8ab25a$var$modalBtnsRef","querySelectorAll","$ce3726a01b8ab25a$var$filmListRef","$ce3726a01b8ab25a$var$backdropRef","$ce3726a01b8ab25a$var$closeModalBtn","$ce3726a01b8ab25a$var$modalBoxRef","$ce3726a01b8ab25a$var$creatQueCol","classList","add","remove","filmsQueue","JSON","parse","localStorage","getItem","fetchFilmsCol","then","data","markup","$3huUq","creatMarkup","innerHTML","catch","console","log","$ce3726a01b8ab25a$var$creatWatchCol","filmsWatched","$ce3726a01b8ab25a$var$closeModalEsc","evt","code","$ce3726a01b8ab25a$var$closeModal","forEach","item","removeAttribute","window","removeEventListener","addEventListener","filmId","Number","target","dataset","id","setAttribute","fetchFilmById","creatCardMarkup","arrW","includes","idxOf","indexOf","splice","setItem","stringify","$iQIUW","Notify","success","warning","arrQ","className"],"version":3,"file":"library.97f2709f.js.map"}